<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ãƒˆãƒ¼ã‚­ãƒ§ãƒ¼ãƒ»ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒªãƒ¼ãƒ»ã‚·ãƒ†ã‚£ 2025 ã‚³ãƒ©ãƒœãƒ•ãƒ¼ãƒ‰æ¤œç´¢ã‚µã‚¤ãƒˆï¼ˆéå…¬å¼ï¼‰">
    <meta name="theme-color" content="#1a2836">
    <title>âœ¨ TDC FOOD Finder - Redesigned</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- ã‚¢ã‚¤ã‚³ãƒ³ -->
    <link rel="icon" type="image/svg+xml" href="icon.svg">
    <link rel="apple-touch-icon" href="icon.svg">
    
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;500;700&family=Shippori+Mincho:wght@400;500;700&family=Noto+Serif+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20,400,0,0" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Serif JP', serif;
            background: linear-gradient(180deg, #1a2836 0%, #131d2a 50%, #0d1419 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Material Symbols Icons */
        .material-symbols-outlined {
            font-variation-settings:
            'FILL' 0,
            'wght' 400,
            'GRAD' 0,
            'opsz' 20;
            font-size: 20px;
            color: #a8b4c8;
            vertical-align: middle;
            margin-right: 4px;
        }

        .filter-toggle .material-symbols-outlined,
        .btn .material-symbols-outlined {
            color: inherit;
        }

        /* æ˜Ÿã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«èƒŒæ™¯ */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .star {
            position: absolute;
            background: #D4AF37;
            border-radius: 50%;
            animation: twinkle 4s infinite ease-in-out;
            box-shadow: 0 0 3px rgba(212, 175, 55, 0.6);
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        /* ã‚³ãƒ³ãƒ†ãƒŠ */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        header {
            text-align: center;
            padding: 60px 20px 40px;
            animation: fadeInDown 1s ease;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            font-family: 'EB Garamond', 'Shippori Mincho', serif;
            font-size: 3.5em;
            font-weight: 500;
            color: #D4AF37;
            margin-bottom: 10px;
            text-shadow: 0 2px 15px rgba(212, 175, 55, 0.5);
            letter-spacing: 0.05em;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
        }

        h1 img {
            width: 60px;
            height: 60px;
            opacity: 0.9;
            filter: drop-shadow(0 0 10px rgba(212, 175, 55, 0.3));
        }

        .subtitle {
            font-size: 1.1em;
            color: #d4dae5;
            margin-bottom: 30px;
            font-weight: 300;
        }

        /* ãƒ•ã‚£ãƒ«ã‚¿ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .filter-container {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            animation: fadeIn 1s ease 0.3s both;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .filter-toggle {
            background: linear-gradient(135deg, #B8860B, #D4AF37);
            border: none;
            color: #1a2836;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            font-family: 'Noto Serif JP', serif;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
        }

        .filter-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.5);
        }

        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .filter-group label {
            font-size: 0.9em;
            color: #d4dae5;
            font-weight: 500;
        }

        .filter-group input,
        .filter-group select {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 10px 15px;
            color: white;
            font-size: 0.95em;
            font-family: 'Noto Serif JP', serif;
            transition: all 0.3s ease;
            height: 44px !important;
            max-height: 44px !important;
            min-height: 44px !important;
            line-height: normal !important;
            box-sizing: border-box;
            overflow: hidden;
            display: block;
            width: 100%;
        }
        
        .filter-group select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 20px;
            padding-right: 40px;
        }

        .filter-group input:focus,
        .filter-group select:focus {
            outline: none;
            border-color: #D4AF37;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.4);
        }

        .filter-group select option {
            background: #1a2836;
            color: white;
        }

        /* ã‚«ãƒ¼ãƒ‰ã‚°ãƒªãƒƒãƒ‰ */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
            padding: 20px 0;
        }

        .food-card {
            background: linear-gradient(135deg, rgba(26, 40, 54, 0.3), rgba(19, 29, 42, 0.3));
            backdrop-filter: blur(10px);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 20px;
            padding: 25px;
            transition: all 0.3s ease;
            animation: cardFadeIn 0.6s ease both;
            position: relative;
            overflow: hidden;
        }

        @keyframes cardFadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .food-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(212, 175, 55, 0.4);
            border-color: rgba(212, 175, 55, 0.7);
        }

        .food-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(212, 175, 55, 0.15), transparent);
            transform: rotate(45deg);
            transition: all 0.5s ease;
        }

        .food-card:hover::before {
            left: 100%;
        }

        .card-header {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 15px;
        }

        .card-title {
            font-size: 1.3em;
            font-weight: 700;
            color: #D4AF37;
            line-height: 1.4;
        }

        .card-price {
            font-size: 1.4em;
            font-weight: 700;
            color: #D4AF37;
        }

        .card-info {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 15px;
        }

        .info-row {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.9em;
        }

        .info-label {
            color: #a8b4c8;
            min-width: 80px;
            display: inline-block;
        }

        .info-value {
            color: white;
            font-weight: 500;
        }

        .coaster-badge {
            display: inline-block;
            background: linear-gradient(135deg, #B8860B, #D4AF37);
            color: #1a2836;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
        }

        /* CSVå‡ºåŠ›ãƒœã‚¿ãƒ³ */
        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 30px 0;
        }

        .btn {
            background: linear-gradient(135deg, #B8860B, #D4AF37);
            color: #1a2836;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Noto Serif JP', serif;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.5);
        }

        /* çµæœè¡¨ç¤º */
        .results-info {
            text-align: center;
            margin: 20px 0;
            font-size: 1.1em;
            color: #d4dae5;
        }

        /* ãƒ•ãƒƒã‚¿ãƒ¼ */
        footer {
            text-align: center;
            padding: 40px 20px;
            color: #d4dae5;
            font-size: 0.9em;
            margin-top: 60px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        footer a {
            color: #D4AF37;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        footer a:hover {
            color: #FFD700;
        }

        /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.2);
            border-top-color: #D4AF37;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
        @media (max-width: 768px) {
            h1 {
                font-size: 2.5em;
            }

            .filter-grid {
                grid-template-columns: 1fr;
            }

            .cards-grid {
                grid-template-columns: 1fr;
            }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <!-- æ˜Ÿã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ« -->
    <div class="stars" id="stars"></div>

    <div class="container">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <header>
            <h1><img src="celestial-chart.png" alt=""> TDC FOOD Finder</h1>
            <p class="subtitle">ãƒˆãƒ¼ã‚­ãƒ§ãƒ¼ãƒ»ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒªãƒ¼ãƒ»ã‚·ãƒ†ã‚£ 2025 éå…¬å¼æ¤œç´¢ã‚µã‚¤ãƒˆ</p>
        </header>

        <!-- ãƒ•ã‚£ãƒ«ã‚¿ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="filter-container">
            <button class="filter-toggle" onclick="toggleFilters()"><span class="material-symbols-outlined">filter_alt</span> ãƒ•ã‚£ãƒ«ã‚¿è¡¨ç¤º/éè¡¨ç¤º</button>
            
            <div id="filterGrid" class="filter-grid">
                <div class="filter-group">
                    <label>ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰</label>
                    <input type="text" id="keyword" placeholder="ãƒ¡ãƒ‹ãƒ¥ãƒ¼åã§æ¤œç´¢...">
                </div>
                
                <div class="filter-group">
                    <label>è€ƒæ¡ˆè€…</label>
                    <select id="creator">
                        <option value="">ã™ã¹ã¦</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>ã‚¨ãƒªã‚¢</label>
                    <select id="area">
                        <option value="">ã™ã¹ã¦</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³</label>
                    <select id="restaurant">
                        <option value="">ã™ã¹ã¦</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>ã‚³ãƒ¼ã‚¹ã‚¿ãƒ¼</label>
                    <select id="coaster">
                        <option value="">ã™ã¹ã¦</option>
                        <option value="ãƒœã‚¤ã‚¹">ãƒœã‚¤ã‚¹</option>
                        <option value="è¬">è¬</option>
                        <option value="ã‚¯ã‚¤ã‚º">ã‚¯ã‚¤ã‚º</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>ä¾¡æ ¼ï¼ˆæœ€å°ï¼‰</label>
                    <input type="number" id="priceMin" placeholder="Â¥0">
                </div>
                
                <div class="filter-group">
                    <label>ä¾¡æ ¼ï¼ˆæœ€å¤§ï¼‰</label>
                    <input type="number" id="priceMax" placeholder="Â¥9999">
                </div>
                
                <div class="filter-group">
                    <label>ä¸¦ã³é †</label>
                    <select id="sortBy">
                        <option value="default">ã‚¨ãƒªã‚¢â†’åº—èˆ—â†’ãƒ¡ãƒ‹ãƒ¥ãƒ¼</option>
                        <option value="priceLow">ä¾¡æ ¼ã®å®‰ã„é †</option>
                        <option value="priceHigh">ä¾¡æ ¼ã®é«˜ã„é †</option>
                        <option value="nameAsc">ãƒ¡ãƒ‹ãƒ¥ãƒ¼åé †</option>
                        <option value="restaurant">åº—èˆ—åé †</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ -->
        <div class="action-buttons">
            <button class="btn" onclick="applyFilters()">âœ¨ æ¤œç´¢</button>
            <button class="btn" onclick="exportCSV()"><span class="material-symbols-outlined">csv</span> CSVå‡ºåŠ›</button>
        </div>

        <!-- çµæœè¡¨ç¤º -->
        <div class="results-info" id="resultsInfo">
            ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...
        </div>

        <!-- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° -->
        <div class="loading" id="loading">
            <div class="loading-spinner"></div>
            <p style="margin-top: 20px;">ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ä¸­...</p>
        </div>

        <!-- ã‚«ãƒ¼ãƒ‰ã‚°ãƒªãƒƒãƒ‰ -->
        <div class="cards-grid" id="cardsGrid">
            <!-- JavaScriptã§å‹•çš„ã«ç”Ÿæˆ -->
        </div>

        <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
        <footer>
            <p>ãƒ‡ãƒ¼ã‚¿å‡ºå…¸: <a href="https://tokyo-discovery-city.quizknock.com/food/" target="_blank">å…¬å¼FOODãƒšãƒ¼ã‚¸</a></p>
            <p style="margin-top: 10px;">éå…¬å¼æ•´ç†ã‚µã‚¤ãƒˆã«ã¤ãã€TDCã€ãŠã‚ˆã³æ ªå¼ä¼šç¤¾batonã¨ã¯ä¸€åˆ‡é–¢ä¿‚ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
            <p style="margin-top: 20px; color: #666;">Redesigned with âœ¨ by Claude</p>
        </footer>
    </div>

    <script>
        // å…¨ãƒ‡ãƒ¼ã‚¿ï¼ˆdata.jsã‚ˆã‚Šï¼‰
        let foodData = [
            { area: "ãƒ©ã‚¯ãƒ¼ã‚¢ DELI & DISH", menu: "ãŠæ˜¼ã”é£¯ã‹ãã‚Œã¨ã‚‚ãŠã‚„ã¤ï¼Ÿ ã‚¨ãƒªãƒ³ã‚®ã®ãƒ•ã‚©ã‚«ãƒƒãƒãƒ£ã¨ã‚¢ãƒƒãƒ—ãƒ«ãƒ‘ã‚¤", author: "æ²³æ‘æ‹“å“‰", restaurant: "Half Saints BAKES", url: "https://www.laqua.jp/shops/list/halfsaintsbakes/", coaster: "ãƒœã‚¤ã‚¹B", price: 1080 },
            { area: "ãƒ©ã‚¯ãƒ¼ã‚¢ DELI & DISH", menu: "å¤œã®å§‹ã¾ã‚Šé»„æ˜ãƒã‚­ãƒ³ãƒ•ã‚©ã‚«ãƒƒãƒãƒ£ï¼†ãƒ”ãƒ¼ãƒãƒ‘ã‚¤", author: "æ±è¨€", restaurant: "Half Saints BAKES", url: "https://www.laqua.jp/shops/list/halfsaintsbakes/", coaster: "è¬B", price: 1080 },
            { area: "ãƒ©ã‚¯ãƒ¼ã‚¢ DELI & DISH", menu: "é£›ã³å‡ºã›ï¼ã„ã¡ã”ã®JAM IN THE DONUTS", author: "æ±å•", restaurant: "JACK IN THE DONUTS", url: "https://www.laqua.jp/shops/list/jackinthedounuts/", coaster: "ãƒœã‚¤ã‚¹B", price: 700 },
            { area: "ãƒ©ã‚¯ãƒ¼ã‚¢ DELI & DISH", menu: "ãƒšãƒ‘ãƒ‘ãƒ—ãƒ—ãƒªãƒ³ ã€œãƒšãƒƒãƒ‘ãƒ¼è–«ã‚‹æ¿ƒåšãƒ‘ãƒ³ãƒ—ã‚­ãƒ³ãƒ—ãƒªãƒ³ã€œ", author: "å±±æœ¬ç¥¥å½°", restaurant: "ã‚¯ãƒ©ãƒ•ãƒˆãƒ—ãƒªãƒ³è£½ä½œæ‰€ vuke", url: "https://www.laqua.jp/shops/list/vuke/", coaster: "ã‚¯ã‚¤ã‚ºA", price: 630 },
            { area: "ãƒ©ã‚¯ãƒ¼ã‚¢ DELI & DISH", menu: "è™¹ã«ãªã„å¤œã®è‰²ã€ç´…èŠ‹ã¨ç´«èŠ‹ã®ãƒ—ãƒªãƒ³", author: "æ²³æ‘æ‹“å“‰", restaurant: "ã‚¯ãƒ©ãƒ•ãƒˆãƒ—ãƒªãƒ³è£½ä½œæ‰€ vuke", url: "https://www.laqua.jp/shops/list/vuke/", coaster: "ã‚¯ã‚¤ã‚ºB", price: 630 },
            { area: "ãƒ©ã‚¯ãƒ¼ã‚¢ DELI & DISH", menu: "æ—¥æœ¬åˆï¼ä¼Šæ²¢ãŒç†±æœ›ã—ãŸãƒ‘ãƒ¼ãƒªãƒ³ã‚«ãƒ»ã‚·ãƒ¥ãƒ¼ã‚¯ãƒªãƒ¼ãƒ ", author: "ä¼Šæ²¢æ‹“å¸", restaurant: "ã‚¢ãƒˆãƒªã‚¨ãƒ»ãƒ‰ãƒ»ãƒãƒ¼", url: "https://www.laqua.jp/shops/list/atelier/", coaster: "è¬A", price: 800 },
            { area: "ãƒ©ã‚¯ãƒ¼ã‚¢ DELI & DISH", menu: "ãƒ•ãƒ«ãƒ¼ãƒ„ãƒãƒ¼ã‚ºã‚¿ãƒ«ãƒˆãƒ»ã‚·ã‚¢ãƒ³ï¼ˆ#00FFFFï¼‰", author: "ãµãã‚‰P", restaurant: "ã‚¢ãƒˆãƒªã‚¨ãƒ»ãƒ‰ãƒ»ãƒãƒ¼", url: "https://www.laqua.jp/shops/list/atelier/", coaster: "ã‚¯ã‚¤ã‚ºB", price: 800 },
            { area: "ãƒ©ã‚¯ãƒ¼ã‚¢ DELI & DISH", menu: "æ±ãªã—ã‚¿ãƒ³ã‚¿ãƒ³ãƒ»ãƒ´ã‚£ã‚ªãƒ¬", author: "ä¼Šæ²¢æ‹“å¸", restaurant: "ãƒ•ãƒ¬ãƒ³ãƒãƒŒãƒ¼ãƒ‰ãƒ«ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼", url: "https://www.laqua.jp/restaurants/list/frenchnoodlefactory/", coaster: "ãƒœã‚¤ã‚¹A", price: 1380 },
            { area: "ãƒ©ã‚¯ãƒ¼ã‚¢ DELI & DISH", menu: "ã„ã¡ã”ã‚¯ãƒªãƒ¼ãƒ ã‚½ãƒ¼ãƒ€ã€œæ´¾æ‰‹ã§ç”˜ãã¦ã‚¢ã‚¤ã‚¹ä»˜ãã£ã¦ã‚¬ãƒæœ€å¼·ã‚„ã‚“ã€œ", author: "é ˆè²é§¿è²´", restaurant: "ãƒ•ãƒ¬ãƒ³ãƒãƒŒãƒ¼ãƒ‰ãƒ«ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼", url: "https://www.laqua.jp/restaurants/list/frenchnoodlefactory/", coaster: "è¬A", price: 780 },
            { area: "ãƒ©ã‚¯ãƒ¼ã‚¢ DELI & DISH", menu: "ã€Œã„ã¡ã”ã€ä¸€ä¼š", author: "é ˆè²é§¿è²´", restaurant: "ä¸€ã€‡å…«æŠ¹èŒ¶èŒ¶å»Š", url: "https://www.laqua.jp/shops/list/ichimaruhachimatchasaro/", coaster: "ãƒœã‚¤ã‚¹A", price: 800 },
            { area: "ãƒ©ã‚¯ãƒ¼ã‚¢ DELI & DISH", menu: "ç‡¦ã€…ï¼ˆã•ã‚“ã•ã‚“ï¼‰", author: "æ±è¨€", restaurant: "éŠ€åº§ èŠå»¼èˆ", url: "https://www.laqua.jp/shops/list/kikunoya/", coaster: "è¬A", price: 1296 },
            { area: "ãƒ©ã‚¯ãƒ¼ã‚¢ DELI & DISH", menu: "å—å›½ã®å±±æœ¬ã•ã‚“ã‚’ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ãƒãƒ³ã‚´ãƒ¼æä»", author: "é¶´å´ä¿®åŠŸ", restaurant: "æ—¥æ—¥åŒ…", url: "https://www.laqua.jp/shops/list/nichinichipao/", coaster: "ã‚¯ã‚¤ã‚ºA", price: 918 },
            { area: "ãƒ©ã‚¯ãƒ¼ã‚¢", menu: "å¡©åˆ†ã¯ãƒãƒ†ãƒˆã§æ‘‚ã‚‹ã®ãŒ1ç•ªï¼ã‚¿ã‚³ã‚¹ãƒŸãƒ¼ãƒˆãƒãƒ†ãƒˆ", author: "é¶´å´ä¿®åŠŸ", restaurant: "ãƒŸã‚²ãƒ«ãƒ•ã‚¢ãƒ‹", url: "https://www.laqua.jp/restaurants/list/migueljuani/", coaster: "ãƒœã‚¤ã‚¹A", price: 1280 },
            { area: "ãƒ©ã‚¯ãƒ¼ã‚¢", menu: "é ˆè²ã‚¹ãƒšã‚·ãƒ£ãƒ«ã‚ªãƒ¬ãƒ³ã‚¸ãƒ•ãƒ­ãƒ¼ãƒˆ é€šå¹´ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«ã—ã¾ã›ã‚“ã‹ï¼Ÿ", author: "é ˆè²é§¿è²´", restaurant: "creperie kenny's", url: "https://www.laqua.jp/restaurants/list/creperiekennys/", coaster: "ã‚¯ã‚¤ã‚ºA", price: 1000 },
            { area: "ãƒ©ã‚¯ãƒ¼ã‚¢", menu: "ãƒãƒŠãƒŠãƒãƒ§ã‚³ãƒŸãƒ«ã‚¯ æ–‘çŠ¶çµ„ç¹”é¢¨", author: "ãµãã‚‰P", restaurant: "creperie kenny's", url: "https://www.laqua.jp/restaurants/list/creperiekennys/", coaster: "è¬A", price: 1000 },
            { area: "ãƒ©ã‚¯ãƒ¼ã‚¢", menu: "ç™½ã„é©å‘½ã€œã‚«ãƒ¬ãƒ¼Ã—ã‚¯ãƒ¬ãƒ¼ãƒ—ã€œ", author: "ä¼Šæ²¢æ‹“å¸", restaurant: "creperie kenny's", url: "https://www.laqua.jp/restaurants/list/creperiekennys/", coaster: "è¬B", price: 1200 },
            { area: "ãƒ©ã‚¯ãƒ¼ã‚¢", menu: "ç¯ç«è¦ªã—ã‚€ã¹ã—ï¼ã‹ã¼ã¡ã‚ƒã®ãƒˆãƒ¼ãƒã‚¯ãƒ¬ãƒ¼ãƒ—", author: "å±±æœ¬ç¥¥å½°", restaurant: "creperie kenny's", url: "https://www.laqua.jp/restaurants/list/creperiekennys/", coaster: "ã‚¯ã‚¤ã‚ºB", price: 1200 },
            { area: "ã‚¹ãƒ‘ ãƒ©ã‚¯ãƒ¼ã‚¢", menu: "ãƒˆãƒï½ãƒˆã‚½ï½ã‚¹ï¼ã†ï½ã‚“ãƒˆãƒ¬ãƒ“ã‚¢ï½ãƒ³ï¼", author: "æ±è¨€", restaurant: "CAFE CASAï¼†Deli", url: "https://www.laqua.jp/spa/facilities/restaurants/casa_deli/", coaster: "ãƒœã‚¤ã‚¹B", price: 1500 },
            { area: "ã‚¹ãƒ‘ ãƒ©ã‚¯ãƒ¼ã‚¢", menu: "ã‚¢ã‚»ãƒ­ãƒ©ã‚µãƒ³ãƒ©ã‚¤ã‚ºãƒ•ãƒ­ãƒ¼ãƒˆ", author: "æ²³æ‘æ‹“å“‰", restaurant: "dayoff cafe", url: "https://www.laqua.jp/spa/facilities/restaurants/dayoffcafe/", coaster: "è¬A", price: 850 },
            { area: "ã‚¹ãƒ‘ ãƒ©ã‚¯ãƒ¼ã‚¢", menu: "çˆç²è»Šå˜ï¼ˆã‚³ãƒ¼ãƒ’ãƒ¼ã‚¼ãƒªãƒ¼ï¼‰", author: "é ˆè²é§¿è²´", restaurant: "R.S. BAR", url: "https://www.laqua.jp/spa/facilities/restaurants/rsbar/", coaster: "ã‚¯ã‚¤ã‚ºB", price: 1200 },
            { area: "ã‚¹ãƒ‘ ãƒ©ã‚¯ãƒ¼ã‚¢", menu: "ç§‰ç‡­å¤œéŠï¼ˆã¸ã„ã—ã‚‡ãã‚„ã‚†ã†ï¼‰", author: "å±±æœ¬ç¥¥å½°", restaurant: "THE BAR", url: "https://www.laqua.jp/spa/facilities/restaurants/the_bar/", coaster: "è¬B", price: 1200 },
            { area: "ã‚¹ãƒ‘ ãƒ©ã‚¯ãƒ¼ã‚¢", menu: "â—¯ãŒ10å€‹ã‚‚ï¼å¤§æ­£è§£ãƒ»ä¸¸åãƒ–ãƒ³ã‚«ãƒ¬ãƒ¼ã€œã‚³ã‚³ãƒŠãƒƒãƒ„é¢¨å‘³ã€œ", author: "ä¼Šæ²¢æ‹“å¸", restaurant: "ãƒ‹ãƒ£ãƒ¼ãƒ´ã‚§ãƒˆãƒŠãƒ ", url: "https://www.laqua.jp/spa/facilities/restaurants/nha-vietnam/", coaster: "ãƒœã‚¤ã‚¹A", price: 1500 },
            { area: "ã‚¹ãƒ‘ ãƒ©ã‚¯ãƒ¼ã‚¢", menu: "æœ€ã‚‚ãŠã„ã—ã„é£²ã¿ç‰©ã€ãƒ¨ãƒ¼ã‚°ãƒ«ãƒˆ", author: "é¶´å´ä¿®åŠŸ", restaurant: "ãƒãƒ¼ãƒ‡ã‚«ãƒ•ã‚§", url: "https://www.laqua.jp/spa/facilities/restaurants/barde_cafe/", coaster: "è¬B", price: 980 },
            { area: "ã‚¹ãƒ‘ ãƒ©ã‚¯ãƒ¼ã‚¢", menu: "æ€ã‚ãšæ­£åº§ã‚‚ããšã—ã¡ã‚ƒã†ãƒ›ãƒ¯ã‚¤ãƒˆãƒ›ãƒƒãƒˆã†ã©ã‚“", author: "å±±æœ¬ç¥¥å½°", restaurant: "ã‚ˆå¿—ã®ã‚„ãƒ€ã‚¤ãƒ‹ãƒ³ã‚°", url: "https://www.laqua.jp/spa/facilities/restaurants/yoshinoya/", coaster: "ãƒœã‚¤ã‚¹B", price: 2500 },
            { area: "ã‚¹ãƒ‘ ãƒ©ã‚¯ãƒ¼ã‚¢", menu: "æº€å–«ãƒ‘ãƒ³ã‚±ãƒ¼ã‚­âˆµãƒãƒ³ã‚´ãƒ¼&ã‚­ã‚¦ã‚¤ãƒ•ãƒ«ãƒ¼ãƒ„", author: "ãµãã‚‰P", restaurant: "ãƒ©ã‚¦ãƒ³ã‚¸ã‚«ãƒ•ã‚§", url: "https://www.laqua.jp/spa/facilities/restaurants/lounge_cafe/", coaster: "ã‚¯ã‚¤ã‚ºA", price: 1500 },
            { area: "æ±äº¬ãƒ‰ãƒ¼ãƒ ã‚·ãƒ†ã‚£ ã‚¢ãƒˆãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‚º", menu: "å¤œã®ã‚¢ã‚¯ã‚¢ãƒãƒªãƒ³", author: "ãµãã‚‰P", restaurant: "ãƒãƒªã‚ªãƒ³ã‚¯ãƒ¬ãƒ¼ãƒ—ï¼ˆã‚¢ãƒˆãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‚ºåº—ï¼‰", url: "https://www.tokyo-dome.co.jp/shops/g-marion-atrak.html", coaster: "è¬B", price: 1000 },
            { area: "æ±äº¬ãƒ‰ãƒ¼ãƒ ã‚·ãƒ†ã‚£ ã‚¢ãƒˆãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‚º", menu: "ã‚„ã£ãŸãƒ¼ï¼ãƒ„ãƒŠã¨ã”ã¼ã†ã®ã‚¯ãƒ¬ãƒ¼ãƒ—ï¼", author: "æ±è¨€", restaurant: "ãƒãƒªã‚ªãƒ³ã‚¯ãƒ¬ãƒ¼ãƒ—ï¼ˆã‚¢ãƒˆãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‚ºåº—ï¼‰", url: "https://www.tokyo-dome.co.jp/shops/g-marion-atrak.html", coaster: "ãƒœã‚¤ã‚¹B", price: 1000 },
            { area: "æ±äº¬ãƒ‰ãƒ¼ãƒ ãƒ›ãƒ†ãƒ«", menu: "ciel tricolore", author: "æ±å•", restaurant: "43F ã‚¹ã‚«ã‚¤ãƒ©ã‚¦ãƒ³ã‚¸ï¼†ãƒ€ã‚¤ãƒ‹ãƒ³ã‚°ã€Œã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆ ã‚«ãƒ•ã‚§ã€ã‚¹ã‚¿ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒãƒ¼", url: "https://www.tokyodome-hotels.co.jp/restaurants/list/artistcafe/", coaster: "ã‚¯ã‚¤ã‚ºA", price: 1800 },
            { area: "æ±äº¬ãƒ‰ãƒ¼ãƒ ãƒ›ãƒ†ãƒ«", menu: "comet hunter", author: "ãµãã‚‰P", restaurant: "43F ã‚¹ã‚«ã‚¤ãƒ©ã‚¦ãƒ³ã‚¸ï¼†ãƒ€ã‚¤ãƒ‹ãƒ³ã‚°ã€Œã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆ ã‚«ãƒ•ã‚§ã€ã‚¹ã‚¿ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒãƒ¼", url: "https://www.tokyodome-hotels.co.jp/restaurants/list/artistcafe/", coaster: "ãƒœã‚¤ã‚¹A", price: 2000 },
            { area: "æ±äº¬ãƒ‰ãƒ¼ãƒ ãƒ›ãƒ†ãƒ«", menu: "ã‚µãƒ³ã‚»ãƒƒãƒˆãƒ”ãƒ¼ãƒãƒ†ã‚£ãƒ¼", author: "æ±è¨€", restaurant: "6F ãƒãƒ¼ã€Œ2000ã€", url: "https://www.tokyodome-hotels.co.jp/restaurants/list/bar2000/", coaster: "ã‚¯ã‚¤ã‚ºA", price: 1800 },
            { area: "æ±äº¬ãƒ‰ãƒ¼ãƒ ãƒ›ãƒ†ãƒ«", menu: "Galaxy ã€œã‚®ãƒ£ãƒ©ã‚¯ã‚·ãƒ¼ã€œ", author: "é ˆè²é§¿è²´", restaurant: "6F ãƒãƒ¼ã€Œ2000ã€", url: "https://www.tokyodome-hotels.co.jp/restaurants/list/bar2000/", coaster: "è¬B", price: 2000 },
            { area: "FOOD STADIUM TOKYO", menu: "å•é¡Œï¼ã‚¿ã‚³ã‚¹ãŒç”Ÿã¾ã‚ŒãŸå›½ã¯ãƒ¡/ ï¾‹ï¾Ÿï¾ï¾ï¾Ÿï¾ æ—¥æœ¬ï¼æ­£è§£ï¼æ—©æŠ¼ã—ã‚¿ã‚³ãƒ©ã‚¤ã‚¹", author: "å±±æœ¬ç¥¥å½°", restaurant: "Don Chava", url: "https://www.tokyo-dome.co.jp/shops/g-donchava.html", coaster: "è¬A", price: 1280 },
            { area: "FOOD STADIUM TOKYO", menu: "ã‚¿ã‚³ã‚¹ã‚»ãƒƒãƒˆï¼ˆã‚¿ã‚³ã‚¹ã®ã€Œã‚¹ã€ã£ã¦è¤‡æ•°å½¢ã®sã ã‹ã‚‰ã‚»ãƒƒãƒˆã˜ã‚ƒãªã‹ã£ãŸã‚‰ãŸã ã®ã‚¿ã‚³ã ã£ãŸã‚ˆã€ã‚ˆã‹ã£ãŸã­ï¼‰", author: "æ²³æ‘æ‹“å“‰", restaurant: "Don Chava", url: "https://www.tokyo-dome.co.jp/shops/g-donchava.html", coaster: "è¬B", price: 1500 },
            { area: "FOOD STADIUM TOKYO", menu: "ä¸˜ã«ç«‹ã¤æœˆè¦‹é¶ã¡ã‚ƒã‚“ã½ã‚“ã€œæšã’ãƒŠã‚¹ã‚’æ·»ãˆã¦ã€œ", author: "æ±å•", restaurant: "èŸ»æœˆ", url: "https://www.tokyo-dome.co.jp/shops/g-arizuki.html", coaster: "ã‚¯ã‚¤ã‚ºB", price: 1480 },
            { area: "FOOD STADIUM TOKYO", menu: "äºŒã¤ã®å‘³ãŒå¹ãæŠœã‘ã‚‹ï¼æµ·é®® ã‚®ãƒ³ãƒŒãƒ³ã‚¬ã‚¬ãƒƒãƒ—ä¸¼", author: "æ±å•", restaurant: "æ°´é“æ©‹ ã™ã—ã‚ã•ã³", url: "https://www.tokyo-dome.co.jp/shops/g-sushiwasabi.html", coaster: "ãƒœã‚¤ã‚¹B", price: 1320 },
            { area: "Space Travelium TeNQ", menu: "ãƒãƒ§ã‚³ãƒãƒŠãƒŠãƒ©ãƒ†ã€å¤©ã®å·ã®ã€ã®ã€ã®é¦™ã‚Š", author: "é¶´å´ä¿®åŠŸ", restaurant: "TeNQ CAFE 138", url: "https://www.tokyo-dome.co.jp/tenq/area/?tabChange=cafe", coaster: "ãƒœã‚¤ã‚¹A", price: 880 },
            { area: "Space Travelium TeNQ", menu: "ãƒ—ãƒªãƒ³ãƒˆãƒ©ãƒ†ã€å¤©å¹•ã€ã€œå¤œé™°ã®ã‚·ã‚¢ã‚¿ãƒ¼ã€œï¼ˆã‚³ãƒ¼ãƒ’ãƒ¼ï¼‰", author: "ä¼Šæ²¢æ‹“å¸", restaurant: "TeNQ CAFE 138", url: "https://www.tokyo-dome.co.jp/tenq/area/?tabChange=cafe", coaster: "ã‚¯ã‚¤ã‚ºB", price: 800 },
            { area: "Space Travelium TeNQ", menu: "ãƒ—ãƒªãƒ³ãƒˆãƒ©ãƒ†ã€å¤©å¹•ã€ã€œå¤œé™°ã®ã‚·ã‚¢ã‚¿ãƒ¼ã€œï¼ˆã‚«ãƒ•ã‚§ãƒ©ãƒ†ï¼‰", author: "ä¼Šæ²¢æ‹“å¸", restaurant: "TeNQ CAFE 138", url: "https://www.tokyo-dome.co.jp/tenq/area/?tabChange=cafe", coaster: "ã‚¯ã‚¤ã‚ºB", price: 850 },
            { area: "Space Travelium TeNQ", menu: "ãƒ—ãƒªãƒ³ãƒˆãƒ©ãƒ†ã€å¤©å¹•ã€ã€œå¤œé™°ã®ã‚·ã‚¢ã‚¿ãƒ¼ã€œï¼ˆæŠ¹èŒ¶ãƒ©ãƒ†ï¼‰", author: "ä¼Šæ²¢æ‹“å¸", restaurant: "TeNQ CAFE 138", url: "https://www.tokyo-dome.co.jp/tenq/area/?tabChange=cafe", coaster: "ã‚¯ã‚¤ã‚ºB", price: 900 },
            { area: "Space Travelium TeNQ", menu: "ãƒ—ãƒªãƒ³ãƒˆãƒ©ãƒ†ã€å¤©å¹•ã€ã€œå¤œé™°ã®ã‚·ã‚¢ã‚¿ãƒ¼ã€œï¼ˆãƒŸãƒ«ã‚¯ãƒ†ã‚£ãƒ¼ï¼‰", author: "ä¼Šæ²¢æ‹“å¸", restaurant: "TeNQ CAFE 138", url: "https://www.tokyo-dome.co.jp/tenq/area/?tabChange=cafe", coaster: "ã‚¯ã‚¤ã‚ºB", price: 900 },
        ];

        let filteredData = [...foodData];

        // æ˜Ÿã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚’ç”Ÿæˆ
        function createStars() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 60; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                const size = Math.random() * 2 + 0.5;
                star.style.width = size + 'px';
                star.style.height = size + 'px';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 4 + 's';
                starsContainer.appendChild(star);
            }
        }

        // ãƒ•ã‚£ãƒ«ã‚¿ã®åˆæœŸåŒ–
        function initializeFilters() {
            const creators = [...new Set(foodData.map(item => item.author))].sort();
            const areas = [...new Set(foodData.map(item => item.area))].sort();
            const restaurants = [...new Set(foodData.map(item => item.restaurant))].sort();

            populateSelect('creator', creators);
            populateSelect('area', areas);
            populateSelect('restaurant', restaurants);
        }

        function populateSelect(id, options) {
            const select = document.getElementById(id);
            options.forEach(option => {
                const opt = document.createElement('option');
                opt.value = option;
                opt.textContent = option;
                select.appendChild(opt);
            });
        }

        // ãƒ•ã‚£ãƒ«ã‚¿è¡¨ç¤º/éè¡¨ç¤º
        function toggleFilters() {
            const filterGrid = document.getElementById('filterGrid');
            filterGrid.classList.toggle('hidden');
        }

        // ã‚«ãƒ¼ãƒ‰è¡¨ç¤º
        function displayCards(data) {
            const grid = document.getElementById('cardsGrid');
            grid.innerHTML = '';

            data.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'food-card';
                card.style.animationDelay = (index * 0.05) + 's';
                
                // é–‰åº—ãƒãƒƒã‚¸ã®ã‚¹ã‚¿ã‚¤ãƒ«
                const closedBadge = item.is_closed ? 
                    '<span style="display: inline-block; background: linear-gradient(135deg, #666, #999); color: white; padding: 4px 12px; border-radius: 12px; font-size: 0.85em; font-weight: 600; margin-left: 10px;">ğŸš« é–‰åº—</span>' : '';
                
                card.innerHTML = `
                    <div class="card-header">
                        <div class="card-title">${item.menu}</div>
                    </div>
                    <div class="card-info">
                        <div class="info-row">
                            <span class="info-label"><span class="material-symbols-outlined">chef_hat</span> è€ƒæ¡ˆè€…</span>
                            <span class="info-value">${item.author}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label"><span class="material-symbols-outlined">payments</span> ä¾¡æ ¼</span>
                            <span class="card-price" style="font-size: 1.2em;">Â¥${item.price.toLocaleString()}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label"><span class="material-symbols-outlined">location_on</span> ã‚¨ãƒªã‚¢</span>
                            <span class="info-value">${item.area}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label"><span class="material-symbols-outlined">store</span> åº—èˆ—</span>
                            <span class="info-value">${item.restaurant}${closedBadge}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label"><span class="material-symbols-outlined">local_activity</span> ã‚³ãƒ¼ã‚¹ã‚¿ãƒ¼</span>
                            <span class="coaster-badge">${item.coaster}</span>
                        </div>
                        ${item.url && !item.is_closed ? `<div class="info-row">
                            <span class="info-label"><span class="material-symbols-outlined">link</span> è©³ç´°</span>
                            <a href="${item.url}" target="_blank" style="color: #D4AF37; text-decoration: none;">å…¬å¼ãƒšãƒ¼ã‚¸ â†’</a>
                        </div>` : ''}
                    </div>
                `;
                
                grid.appendChild(card);
            });

            updateResultsInfo(data.length);
        }

        // çµæœæƒ…å ±æ›´æ–°
        function updateResultsInfo(count) {
            const info = document.getElementById('resultsInfo');
            info.textContent = `${count}ä»¶ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’è¡¨ç¤ºä¸­`;
        }

        // ãƒ•ã‚£ãƒ«ã‚¿é©ç”¨
        function applyFilters() {
            const keyword = document.getElementById('keyword').value.toLowerCase();
            const creator = document.getElementById('creator').value;
            const area = document.getElementById('area').value;
            const restaurant = document.getElementById('restaurant').value;
            const coaster = document.getElementById('coaster').value;
            const priceMin = parseInt(document.getElementById('priceMin').value) || 0;
            const priceMax = parseInt(document.getElementById('priceMax').value) || Infinity;
            const sortBy = document.getElementById('sortBy').value;

            filteredData = foodData.filter(item => {
                return (keyword === '' || item.menu.toLowerCase().includes(keyword)) &&
                       (creator === '' || item.author === creator) &&
                       (area === '' || item.area === area) &&
                       (restaurant === '' || item.restaurant === restaurant) &&
                       (coaster === '' || item.coaster.includes(coaster)) &&
                       (item.price >= priceMin && item.price <= priceMax);
            });

            // ã‚½ãƒ¼ãƒˆ
            switch(sortBy) {
                case 'priceLow':
                    filteredData.sort((a, b) => a.price - b.price);
                    break;
                case 'priceHigh':
                    filteredData.sort((a, b) => b.price - a.price);
                    break;
                case 'nameAsc':
                    filteredData.sort((a, b) => a.menu.localeCompare(b.menu, 'ja'));
                    break;
                case 'restaurant':
                    filteredData.sort((a, b) => a.restaurant.localeCompare(b.restaurant, 'ja'));
                    break;
                default:
                    filteredData.sort((a, b) => {
                        if (a.area !== b.area) return a.area.localeCompare(b.area, 'ja');
                        if (a.restaurant !== b.restaurant) return a.restaurant.localeCompare(b.restaurant, 'ja');
                        return a.menu.localeCompare(b.menu, 'ja');
                    });
            }

            displayCards(filteredData);
        }

        // CSVå‡ºåŠ›
        function exportCSV() {
            const headers = ['ã‚¨ãƒªã‚¢', 'ãƒ¡ãƒ‹ãƒ¥ãƒ¼å', 'è€ƒæ¡ˆè€…', 'åº—èˆ—', 'ã‚³ãƒ¼ã‚¹ã‚¿ãƒ¼', 'ä¾¡æ ¼', 'URL'];
            const rows = filteredData.map(item => [
                item.area,
                item.menu,
                item.author,
                item.restaurant,
                item.coaster,
                item.price,
                item.url || ''
            ]);

            let csv = headers.join(',') + '\n';
            rows.forEach(row => {
                csv += row.map(cell => `"${cell}"`).join(',') + '\n';
            });

            const blob = new Blob(['\uFEFF' + csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'tdc_food_finder.csv';
            link.click();
        }

        // åˆæœŸåŒ–
        window.onload = function() {
            createStars();
            initializeFilters();
            displayCards(foodData);
            
            // ãƒ•ã‚£ãƒ«ã‚¿å¤‰æ›´æ™‚ã«è‡ªå‹•æ¤œç´¢
            ['keyword', 'creator', 'area', 'restaurant', 'coaster', 'priceMin', 'priceMax', 'sortBy'].forEach(id => {
                document.getElementById(id).addEventListener('change', applyFilters);
                if (id === 'keyword') {
                    document.getElementById(id).addEventListener('input', applyFilters);
                }
            });

            // Service Workerç™»éŒ²ï¼ˆPWAåŒ–ï¼‰
            // æ³¨: ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç’°å¢ƒã‚„ãƒ­ãƒ¼ã‚«ãƒ«ãƒ›ã‚¹ãƒˆä»¥å¤–ã§ã¯å‹•ä½œã—ãªã„å ´åˆãŒã‚ã‚Šã¾ã™
            if ('serviceWorker' in navigator && location.hostname !== 'claudeusercontent.com') {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(registration => {
                        console.log('âœ¨ PWAç™»éŒ²æˆåŠŸï¼', registration.scope);
                    })
                    .catch(error => {
                        console.log('PWAç™»éŒ²ã‚¹ã‚­ãƒƒãƒ—: ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç’°å¢ƒã¾ãŸã¯service-worker.jsãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                        // ã‚¨ãƒ©ãƒ¼ã¯ç„¡è¦–ï¼ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç’°å¢ƒã§ã¯æ­£å¸¸ï¼‰
                    });
            } else if (location.hostname === 'claudeusercontent.com') {
                console.log('PWAç™»éŒ²ã‚¹ã‚­ãƒƒãƒ—: ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç’°å¢ƒã§ã¯PWAã¯å‹•ä½œã—ã¾ã›ã‚“');
            }
        };
    </script>
</body>
</html>
